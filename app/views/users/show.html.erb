<% provide(:title, @user.name) %>
<div class="row">
  <aside class="col-md-4">
    <section>
      <h1 style="color:white;">
        <%= image_tag @user.avatar.url(:medium) , :class=> "img-circular-profile"  %>
        <%= @user.name %>
      </h1>
    </section>
  </aside>
  <div class="col-md-8">
    <%= render 'follow_form' if logged_in? %>
    <body>
      <ul class="tab" id="profileTab">
        <li><a href="#1">Search</a></li>
        <li><a href="#2">Songs</a></li>
        <li><a href="#3">About</a></li>
        <li><a href="#4">Followers (<%= @user.followers.count %>)</a></li>
        <li><a href="#5">Following (<%= @user.following.count %>)</a></li>
        <li><a href="#6">Comments (<%= @comments.count %>)</a></li>
      </ul>
      <div class="tab-content">
         <div class="tab-pane" id="1"><%=render 'search'%></div>
         <div class="tab-pane" id="2"><%=render 'songs'%></div>
         <div class="tab-pane" id="3"><%=render 'about'%></div>
         <div class="tab-pane" id="4"><%=render 'followers'%></div>
         <div class="tab-pane" id="5"><%=render 'following'%></div>
         <div class="tab-pane" id="6"><%=render 'microposts'%></div>
      </div>
    </body>
  </div>
</div>

<script type="text/javascript">
  $("#connectDeezer").click(function(){

      window.open("http://www.deezer.com/");

    });
</script>

<script>
  $('#profileTab a').click(function(e) {
  e.preventDefault();
  $(this).tab('show');
});

// store the currently selected tab in the hash value
$("ul.tab > li > a").on("shown.bs.tab", function(e) {
  var id = $(e.target).attr("href").substr(1);
  window.location.hash = id;
});

// on load of the page: switch to the currently selected tab
var hash = window.location.hash;
$('#profileTab a[href="' + hash + '"]').tab('show');
</script>